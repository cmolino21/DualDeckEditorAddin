<Project Sdk="Microsoft.NET.Sdk">

	<PropertyGroup>
		<ResolveAssemblyWarnOrErrorOnTargetArchitectureMismatch>None</ResolveAssemblyWarnOrErrorOnTargetArchitectureMismatch>
		<OutputType>Library</OutputType>
		<Configurations>R 2021;R 2022;R 2023;R 2024;D 2021;D 2022;D 2023;D 2024</Configurations>
	</PropertyGroup>
	
	<!--Revit version and framework-->
	<Choose>
		<When Condition="$(Configuration.Contains('2021'))">	
			<PropertyGroup>
				<RevitVersion>2021</RevitVersion>
				<TargetFramework>net48</TargetFramework>
			</PropertyGroup>			
		</When>
		
		<When Condition="$(Configuration.Contains('2022'))">	
			<PropertyGroup>
				<RevitVersion>2022</RevitVersion>
				<TargetFramework>net48</TargetFramework>
			</PropertyGroup>			
		</When>

		<When Condition="$(Configuration.Contains('2023'))">
			<PropertyGroup>
				<RevitVersion>2023</RevitVersion>
				<TargetFramework>net48</TargetFramework>
			</PropertyGroup>
		</When>

		<When Condition="$(Configuration.Contains('2024'))">
			<PropertyGroup>
				<RevitVersion>2024</RevitVersion>
				<TargetFramework>net48</TargetFramework>
			</PropertyGroup>
		</When>
	</Choose>
	
	

	<!--Assembly-->
	<PropertyGroup>
		<ProjectGuid>{B4910B52-146D-4FB3-BE0F-824CE0DE5E67}</ProjectGuid>
		<RootNamespace>DualDeckEditorAddin</RootNamespace>
		<AssemblyName>DualDeckEditorAddin</AssemblyName>
		<AutoGenerateBindingRedirects>true</AutoGenerateBindingRedirects>
		<Deterministic>true</Deterministic>
	</PropertyGroup>

	<!--Debug-->
	<PropertyGroup Condition="$(Configuration.Contains('D'))">
		<DebugSymbols>true</DebugSymbols>
		<OutputPath>bin\x64\Debug\$(RevitVersion)\</OutputPath>
		<DefineConstants>DEBUG;TRACE;REVIT$(RevitVersion)</DefineConstants>
		<DebugType>full</DebugType>
		<PlatformTarget>x64</PlatformTarget>
		<LangVersion>7.3</LangVersion>
		<ErrorReport>prompt</ErrorReport>
		<Prefer32Bit>true</Prefer32Bit>
	</PropertyGroup>

	<!--Release-->
	<PropertyGroup Condition="$(Configuration.Contains('R'))">
		<OutputPath>bin\x64\Release\$(RevitVersion)\</OutputPath>
		<DefineConstants>TRACE;REVIT$(RevitVersion)</DefineConstants>
		<Optimize>true</Optimize>
		<DebugType>pdbonly</DebugType>
		<PlatformTarget>x64</PlatformTarget>
		<LangVersion>7.3</LangVersion>
		<ErrorReport>prompt</ErrorReport>
		<Prefer32Bit>true</Prefer32Bit>
	</PropertyGroup>


	<PropertyGroup>
		<StartupObject />
	</PropertyGroup>


	<PropertyGroup>
		<!-- Forcibly set platform to 'x64' and ignore architecture-related problems -->
		<PlatformTarget>x64</PlatformTarget>
		<Platforms>x64</Platforms>


		<!-- Invert the behavior of new .csproj format - exclude files by default -->
		<EnableDefaultCompileItems>false</EnableDefaultCompileItems>
		<EnableDefaultItems>false</EnableDefaultItems>

		<!-- Multiple targets can cause obj folder locking by concurrent builds -->
		<BuildInParallel>false</BuildInParallel>
	</PropertyGroup>
	

	<!--Revit API Version and other references-->
	<ItemGroup>
		<Reference Include="System" />
		<Reference Include="System.Core" />
		<Reference Include="System.Xml.Linq" />
		<Reference Include="System.Data.DataSetExtensions" />
		<Reference Include="Microsoft.CSharp" />
		<Reference Include="System.Data" />
		<Reference Include="System.Deployment" />
		<Reference Include="System.Drawing" />
		<Reference Include="System.Net.Http" />
		<Reference Include="System.Windows.Forms" />
		<Reference Include="System.Xml" />
	</ItemGroup>

	<!--Inlcuded Files-->
	<ItemGroup>
		<Compile Include="EditParameters.cs" />
		<Compile Include="Utility Classes\UIMapping.cs" />
		<Compile Include="DualDeckEditorCommand.cs" />
		<Compile Include="MainFormEditor.cs">
			<SubType>Form</SubType>
		</Compile>
		<Compile Include="MainFormEditor.Designer.cs">
			<DependentUpon>MainFormEditor.cs</DependentUpon>
		</Compile>
		<EmbeddedResource Include="MainFormEditor.resx">
			<DependentUpon>MainFormEditor.cs</DependentUpon>
			<SubType>Designer</SubType>
		</EmbeddedResource>
	</ItemGroup>


	<ItemGroup>
		<None Include="App.config" />
	</ItemGroup>

	<!--Manifest File-->
	<ItemGroup>
		<None Include="DualDeckEditor.addin">
			<CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
		</None>
	</ItemGroup>
	
	
	<ItemGroup>
	  <PackageReference Include="Revit_All_Main_Versions_API_x64" Version="$(RevitVersion).*" IncludeAssets="build; compile" PrivateAssets="All" />
	</ItemGroup>


</Project>